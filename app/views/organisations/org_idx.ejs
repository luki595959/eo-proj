<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Aukcie</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" />
    <link rel="stylesheet" href="/css/all.min.css" />
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/slick/slick.css" />
    <link rel="stylesheet" type="text/css" href="/slick/slick-theme.css" />
    <link rel="stylesheet" href="/css/templatemo-style.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
</head>


<body id="servicesPage">
    <div class="parallax-window" data-parallax="scroll" data-image-src="/img/bg-01.jpg">
        <div class="container-fluid">
            <div class="row tm-brand-row">
                <div class="col-lg-4 col-11">
                    <div class="tm-brand-container tm-bg-white-transparent">
                        <i class="fas fa-2x fa-gavel tm-brand-icon"></i>
                        <div class="tm-brand-texts">
                            <h1 class="text-uppercase tm-brand-name">Auction app</h1>
                            <p class="small">Apka na vizualizaciu aukcii</p>
                        </div>
                    </div>
                </div>

                <style>
                    .dropbtn {
                        background-color: none;
                        border: none;
                    }

                    .dropdown {
                        position: relative;
                        display: inline-block;
                    }

                    .dropdown-content {
                        display: none;
                        position: absolute;
                        background-color: #f1f1f1;
                        min-width: 160px;
                        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
                        z-index: 1;
                    }

                    .dropdown-content a {
                        color: black;
                        padding: 12px 16px;
                        text-decoration: none;
                        display: block;
                    }

                    .dropdown-content a:hover {
                        background-color: #ddd;
                    }

                    .dropdown:hover .dropdown-content {
                        display: block;
                    }
                </style>
                <div class="col-lg-8 col-1">
                    <div class="tm-nav">
                        <nav class="navbar navbar-expand-lg navbar-light tm-bg-white-transparent tm-navbar">
                            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="collapse navbar-collapse" id="navbarNav">
                                <ul class="navbar-nav">


                                    <li class="nav-item">
                                        <div class="tm-nav-link-highlight"></div>
                                        <a class="nav-link" href="/">Domov </a>
                                    </li>


                                    <li class="nav-item">
                                        <div class="tm-nav-link-highlight"></div>
                                        <a class="nav-link" href="/">Statistiky</a>
                                    </li>
                                    <li class="nav-item">
                                        <div class="tm-nav-link-highlight"></div>
                                        <a class="nav-link" href="/">Kategorie</a>
                                    </li>
                                    <li class="nav-item active">
                                        <div class="tm-nav-link-highlight"></div>
                                        <a class="nav-link"
                                            href="/organizations/<%=auctions[0].organization%>">Organizacie</a>
                                    </li>
                                    <li class="nav-item">
                                        <div class="tm-nav-link-highlight"></div>
                                        <a class="nav-link" href="/">Ucastnici</a>
                                    </li>
                                    <li class="nav-item ">
                                        <div class="tm-nav-link-highlight"></div>
                                        <div class="dropdown  nav-link">
                                            <button class="dropbtn">Aukcie</button>
                                            <div class="dropdown-content">
                                                <a href="/auctions/new">Poslednych 15</a>
                                                <a href="/auctions/27-9-269">Podla ID</a>
                                                <a href="/auctions/q/Papírové hrany">Podla nazvu</a>


                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>

            <!-- Testimonials header -->
            <section class="row" id="tmServices">
                <div class="col-4"></div>
                <div class="col-8">
                    <label class="tm-tab-links " for="id_au" style="color: white;">Vyber aukcie:</label>
                    <select style="color: black;" name="id_au" class="form-control" onchange="location = this.value;">
                        <option value="">ID AU</option>

                        <% data.forEach(function(data){ %>
                            <option value="/organizations/<%=data%>">
                                <%=data%>
                            </option>
                            <% }); %>
                    </select>
                </div>
                <div class="col-12">
                    <div class="parallax-window tm-services-parallax-header tm-testimonials-parallax-header"
                        data-parallax="scroll" data-z-index="101" data-image-src="img/ice-mountain.jpg">

                        <div class="tm-bg-black-transparent text-center tm-services-header tm-testimonials-header">
                            <h2 class="text-uppercase tm-services-page-title tm-testimonials-page-title">Ogranizacia:
                                <%=auctions[0].organization %>
                            </h2>

                        </div>
                    </div>
                </div>
            </section>
            <section class="row tm-testimonials-section">
                <h2 class="col-12 text-center" style="color: white;"><b>Aukcie pre Ogranizaciu
                    </b>
                </h2>
                <div class="col-12 tm-carousel">

                    <%for(var i=0;i < auctions.length;i+=25){%>
                        <div class="tm-bg-black-transparent tm-testimonial-box text-center">
                            <p class="tm-about-description">
                                <%for(var j=0;j < 25;j++){%>
                                    <% if(i+j>= auctions.length){break;}%>
                                        <a href="/auctions/<%=auctions[i+j].auctionUniqueId%>">
                                            <%=auctions[i+j].auctionUniqueId%>
                                        </a>
                                        <br>
                                        <%}%>
                            </p>
                        </div>
                        <% } %>


                </div>
            </section>

            <section class="row tm-testimonials-section ">
                <h2 class="col-12 text-center" style="color: white;"> Grafy
                </h2>

                <div class="col-6">
                    <div class="tm-bg-black-transparent tm-testimonial-box text-center">
                        <h3 class="tm-about-name tm-uppercase">Typy vyhodnotenia aukcii</h3>
                        <p class="tm-about-description">
                            <%=lst=[]%>
                                <% auctions.forEach(function(data){ %>
                                    <%lst.push(data.auctionVal)%>
                                        <% }); %>
                                            <canvas id="myChart" width="500" height="250"></canvas>
                                            <script>
                                                var aa = "<%=lst%>"
                                                aa = aa.split(",")
                                                var b = aa.reduce(function (acc, curr) {
                                                    if (typeof acc[curr] == 'undefined') {
                                                        acc[curr] = 1;
                                                    } else {
                                                        acc[curr] += 1;
                                                    }

                                                    return acc;
                                                }, {});
                                                colors = []
                                                for (var i = 0; i < Object.keys(b).length; i++) {
                                                    colors.push('#' + Math.floor(Math.random() * 16777215).toString(16),)
                                                }
                                                const ctx = document.getElementById('myChart').getContext('2d');
                                                const myChart = new Chart(ctx, {

                                                    type: 'pie',
                                                    data: {
                                                        labels: Object.keys(b),
                                                        datasets: [{
                                                            label: 'cena',
                                                            data: Object.values(b),
                                                            backgroundColor: colors,

                                                        }]

                                                    }

                                                });
                                            </script>
                        </p>
                    </div>
                </div>

                <div class="col-6">
                    <div class="tm-bg-black-transparent tm-testimonial-box text-center">
                        <h3 class="tm-about-name tm-uppercase">Typy auckii</h3>
                        <p class="tm-about-description">
                            <%=lst1=[]%>
                                <% auctions.forEach(function(data){ %>
                                    <%lst1.push(data.auctionType)%>
                                        <% }); %>
                                            <canvas id="myChart1" width="500" height="250"></canvas>
                                            <script>
                                                var aa = "<%=lst1%>"
                                                aa = aa.split(",")
                                                var b = aa.reduce(function (acc, curr) {
                                                    if (typeof acc[curr] == 'undefined') {
                                                        acc[curr] = 1;
                                                    } else {
                                                        acc[curr] += 1;
                                                    }

                                                    return acc;
                                                }, {});
                                                colors = []
                                                for (var i = 0; i < Object.keys(b).length; i++) {
                                                    colors.push('#' + Math.floor(Math.random() * 16777215).toString(16),)
                                                }
                                                const ctx1 = document.getElementById('myChart1').getContext('2d');
                                                const myChart1 = new Chart(ctx1, {

                                                    type: 'pie',
                                                    data: {
                                                        labels: Object.keys(b),
                                                        datasets: [{
                                                            label: 'cena',
                                                            data: Object.values(b),
                                                            backgroundColor: colors,

                                                        }]

                                                    }

                                                });
                                            </script>
                        </p>
                    </div>
                </div>

                <div class="col-6">
                    <div class="tm-bg-black-transparent tm-testimonial-box text-center">
                        <h3 class="tm-about-name tm-uppercase">Pomer kategorii</h3>
                        <p class="tm-about-description">
                            <%=lst2=[]%>
                                <% auctions.forEach(function(data){ %>
                                    <%lst2.push(data.category)%>
                                        <% }); %>
                                            <canvas id="myChart2" width="500" height="250"></canvas>
                                            <script>
                                                var aa = "<%=lst2%>"
                                                aa = aa.split(",")
                                                var b = aa.reduce(function (acc, curr) {
                                                    if (typeof acc[curr] == 'undefined') {
                                                        acc[curr] = 1;
                                                    } else {
                                                        acc[curr] += 1;
                                                    }

                                                    return acc;
                                                }, {});
                                                colors = []
                                                for (var i = 0; i < Object.keys(b).length; i++) {
                                                    colors.push('#' + Math.floor(Math.random() * 16777215).toString(16),)
                                                }
                                                const ctx2 = document.getElementById('myChart2').getContext('2d');
                                                const myChart2 = new Chart(ctx2, {

                                                    type: 'pie',
                                                    data: {
                                                        labels: Object.keys(b),
                                                        datasets: [{
                                                            label: 'cena',
                                                            data: Object.values(b),
                                                            backgroundColor: colors,

                                                        }]

                                                    }

                                                });
                                            </script>
                        </p>
                    </div>
                </div>
                <div class="col-6">
                    <div class="tm-bg-black-transparent tm-testimonial-box text-center">
                        <h3 class="tm-about-name tm-uppercase">Pomer subkategorii</h3>
                        <p class="tm-about-description">
                            <%=lst2=[]%>
                                <% auctions.forEach(function(data){ %>
                                    <%lst2.push(data.subcategory)%>
                                        <% }); %>
                                            <canvas id="myChart3" width="250" height="125"></canvas>
                                            <script>
                                                var aa = "<%=lst2%>"
                                                aa = aa.split(",")
                                                var b = aa.reduce(function (acc, curr) {
                                                    if (typeof acc[curr] == 'undefined') {
                                                        acc[curr] = 1;
                                                    } else {
                                                        acc[curr] += 1;
                                                    }

                                                    return acc;
                                                }, {});
                                                colors = []
                                                for (var i = 0; i < Object.keys(b).length; i++) {
                                                    colors.push('#' + Math.floor(Math.random() * 16777215).toString(16),)
                                                }
                                                const ctx3 = document.getElementById('myChart3').getContext('2d');
                                                const myChart3 = new Chart(ctx3, {

                                                    type: 'pie',
                                                    data: {
                                                        labels: Object.keys(b),
                                                        datasets: [{
                                                            label: 'cena',
                                                            data: Object.values(b),
                                                            backgroundColor: colors,

                                                        }]

                                                    }

                                                });
                                            </script>
                        </p>
                    </div>
                </div>
            </section>
            <div class="row" id="tmFeatures">
                <h2 class="col-12 text-center" style="color:white"><b>Statistiky</b></h2>
                <div class="col-lg-4" style="margin-bottom: 25px;">
                    <div class="tm-bg-white-transparent tm-feature-box">
                        <h3 class="tm-feature-name">Vydavky</h3>
                        <div class="tm-feature-icon-container">
                            <i class="fas fa-3x fa-money-bill-wave"></i>
                        </div>
                        <%val=0%>
                            <% auctions.forEach(function(data){ %>
                                <%val=val + data.winnerOffer%>
                                    <% }); %>
                                        <p class="text-center">Celkova vydavky: <b>
                                                <%=Math.round(val *1000) / 1000 %>
                                                    <%=auctions[0].currency%>
                                            </b>
                                            <br>
                                            Priemerne vydavky na 1 polozku: <b>
                                                <%=Math.round((val / val1) * 1000) / 1000 %>
                                                    <%=auctions[0].currency%>
                                            </b>
                                        </p>





                    </div>
                </div>
                <div class="col-lg-4" style="margin-bottom: 25px;">
                    <div class="tm-bg-white-transparent tm-feature-box">
                        <h3 class="tm-feature-name">Polozky</h3>
                        <div class="tm-feature-icon-container">
                            <i class="fas fa-3x fa-box-open"></i>
                        </div>
                        <p class="text-center">Celkovy pocet nakupenych poloziek.
                        </p>
                        <%val1=0%>
                            <% auctions.forEach(function(data){ %>
                                <%val1=val1 + data.itemsCount%>
                                    <% }); %>
                                        <h3>
                                            <%=val1%> ks

                                        </h3>
                    </div>
                </div>
                <div class="col-lg-4" style="margin-bottom: 25px;">
                    <div class="tm-bg-white-transparent tm-feature-box">
                        <h3 class="tm-feature-name">Uspory</h3>

                        <div class="tm-feature-icon-container">
                            <i class="fas fa-3x fa-coins"></i>
                        </div>
                        <%val2=0%>
                            <% auctions.forEach(function(data){ %>
                                <%val2=val2 + data.savingComparison%>
                                    <% }); %>
                                        <p class="text-center">Celkovy uspory: <b>
                                                <%=Math.round(val2 * 1000) / 1000 %>
                                                    <%=auctions[0].currency%>
                                            </b>
                                            <br>
                                            Priemerne uspory: <b>
                                                <%=Math.round((val2 / val1) * 1000) / 1000 %>
                                                    <%=auctions[0].currency%>
                                            </b>
                                        </p>




                    </div>
                </div>
                <div class="col-lg-4" style="margin-bottom: 25px;">
                    <div class="tm-bg-white-transparent tm-feature-box">
                        <h3 class="tm-feature-name">Pozvanky</h3>

                        <div class="tm-feature-icon-container">
                            <i class="fas fa-3x fa-share-alt"></i>
                        </div>
                        <p class="text-center">Celkovy pocet odoslanych pozvanok.
                        </p>
                        <%val3=0%>
                            <% auctions.forEach(function(data){ %>
                                <%val3=val3 + data.invitationsCount%>
                                    <% }); %>
                                        <h3>
                                            <%=val3%>
                                        </h3>
                    </div>
                </div>
                <div class="col-lg-4" style="margin-bottom: 25px;">
                    <div class="tm-bg-white-transparent tm-feature-box">
                        <h3 class="tm-feature-name">Aktivny ucastnici </h3>

                        <div class="tm-feature-icon-container">
                            <i class="fas fa-3x fa-users"></i>
                        </div>
                        <p class="text-center">Celkovy pocet aktivnych ucastnikov.
                        </p>
                        <%val4=0%>
                            <% auctions.forEach(function(data){ %>
                                <%val4=val4 + data.activeParticipantsCount%>
                                    <% }); %>
                                        <h3>
                                            <%=val4%>
                                        </h3>
                    </div>
                </div>
                <div class="col-lg-4" style="margin-bottom: 25px;">
                    <div class="tm-bg-white-transparent tm-feature-box">
                        <h3 class="tm-feature-name">Auckie</h3>

                        <div class="tm-feature-icon-container">
                            <i class="fas fa-3x fa-layer-group"></i>
                        </div>
                        <p class="text-center">Celkovy pocet vytvorenych aukcii.
                        </p>

                        <h3>
                            <%=auctions.length%>
                        </h3>
                    </div>
                </div>
            </div>

            <!-- Page footer -->
            <footer class="row">
                <p class="col-12 text-white text-center tm-copyright-text">
                    Copyright &copy; 2021 EO Project.
                    Designed by Lenka, Luki a Tomi.
                </p>
            </footer>
        </div>
        <!-- .container-fluid -->
    </div>

    <script src="/js/jquery.min.js"></script>
    <script src="/js/parallax.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/slick/slick.min.js"></script>
    <script>
        $(function () {
            $('.tabgroup > div').hide();
            $('.tabgroup > div:first-of-type').show();
            $('.tabs a').click(function (e) {
                e.preventDefault();
                var $this = $(this),
                    tabgroup = '#' + $this.parents('.tabs').data('tabgroup'),
                    others = $this.closest('li').siblings().children('a'),
                    target = $this.attr('href');
                others.removeClass('active');
                $this.addClass('active');
                $(tabgroup).children('div').hide();
                $(target).show();

                // Scroll to tab content (for mobile)
                if ($(window).width() < 992) {
                    $('html, body').animate({
                        scrollTop: $("#first-tab-group").offset().top
                    }, 200);
                }
            })

            $('.tm-carousel').slick({
                dots: true,
                infinite: false,
                arrows: false,
                speed: 300,
                slidesToShow: 3,
                slidesToScroll: 2,
                responsive: [
                    {
                        breakpoint: 1024,
                        settings: {
                            arrows: false,
                            slidesToShow: 2,
                            slidesToScroll: 1,
                            infinite: true,
                            dots: true
                        }
                    },
                    {
                        breakpoint: 600,
                        settings: {
                            arrows: false,
                            slidesToShow: 1,
                            slidesToScroll: 1
                        }
                    },
                    {
                        breakpoint: 480,
                        settings: {
                            arrows: false,
                            slidesToShow: 1,
                            slidesToScroll: 1
                        }
                    }
                    // You can unslick at a given breakpoint now by adding:
                    // settings: "unslick"
                    // instead of a settings object
                ]
            });
        });

    </script>
</body>

</html>